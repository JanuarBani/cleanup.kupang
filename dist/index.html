<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!-- Tambahkan Font Awesome untuk icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <title>Cleanup App</title>
  <script type="module" crossorigin src="/assets/index-C2HavDub.js"></script>
  <link rel="stylesheet" crossorigin href="/assets/index-B__6iNR7.css">
<link rel="manifest" href="/manifest.webmanifest"></head>
<body>
    <div id="app"></div>

    <!-- Di index.html sebelum </body> -->
<script>
// Debug localStorage
console.log("ğŸ” LOCALSTORAGE STATUS:");
console.log("access token:", localStorage.getItem("access") ? "âœ… ADA" : "âŒ TIDAK ADA");
console.log("refresh token:", localStorage.getItem("refresh") ? "âœ… ADA" : "âŒ TIDAK ADA");
console.log("user data:", localStorage.getItem("user") ? "âœ… ADA" : "âŒ TIDAK ADA");

// Cek detail token jika ada
const token = localStorage.getItem("access");
if (token) {
    try {
        const parts = token.split('.');
        if (parts.length === 3) {
            const payload = JSON.parse(atob(parts[1]));
            console.log("ğŸ“Š Token Payload:", payload);
            console.log("ğŸ‘¤ User ID:", payload.user_id);
            console.log("â° Expires:", new Date(payload.exp * 1000));
            console.log("â° Waktu sekarang:", new Date());
            
            // Hitung sisa waktu
            const remainingMs = (payload.exp * 1000) - Date.now();
            const remainingHours = Math.floor(remainingMs / (1000 * 60 * 60));
            const remainingMinutes = Math.floor((remainingMs % (1000 * 60 * 60)) / (1000 * 60));
            console.log(`â³ Token valid untuk: ${remainingHours} jam ${remainingMinutes} menit lagi`);
        }
    } catch(e) {
        console.error("âŒ Gagal decode token:", e);
    }
}

// Cek user data jika ada
const userStr = localStorage.getItem("user");
if (userStr) {
    try {
        const user = JSON.parse(userStr);
        console.log("ğŸ‘¤ User Detail:", user);
        console.log("ğŸ”‘ ID:", user.id);
        console.log("ğŸ‘¥ Role:", user.role);
        console.log("ğŸ“› Username:", user.username);
    } catch(e) {
        console.error("âŒ Gagal parse user data:", e);
    }
}
</script>
</body>
</html>
